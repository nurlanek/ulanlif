{% extends 'reports/base.html' %}

{% block content %}


    <h4>Отчет по состоянию работы всех сотрудников</h4>
ooo
    <form method="get" class="form">
        <div class="row">
            <div class="col-auto">
                {{ form.status.label_tag }}
                {{ form.status }}
            </div>
            <div class="col-auto">
                {{ form.kroy_no.label_tag }}
                {{ form.kroy_no }}
            </div>
            <div class="col-auto">
                {{ form.start_date.label_tag }}
                {{ form.start_date }}
            </div>
            <div class="col-auto">
                {{ form.end_date.label_tag }}
                {{ form.end_date }}
            </div>
            <div class="col-auto d-flex align-items-end">
                <button type="submit" class="btn btn-secondary btn-sm">Показать</button>
            </div>
        </div>
    </form>

    <div class="d-flex justify-content-end mb-3">
        <div class="me-2">
            {% include 'partials/print.html' %}
        </div>
        <div>
            {% include 'partials/to_exel.html' %}
        </div>
    </div>
  <div id="table-container">
    <table class="table table-bordered mt-3" id="mytable">
        <thead>
            <tr>
                <th colspan="6" class="text-center">
                    Состояния работ: {{ status }} - Дата начала: {{ start_date }} - Дата окончания: {{ end_date }}
                </th>
            </tr>
            <tr>
                <th>Пользователь</th>
                <th>Единица (сумма)</th>
                <th>Цена (сумма)</th>
                <th>Дата выполнение</th>
            </tr>
        </thead>
        <tbody>
            {% for item in report_data %}
            <tr>
                <td>{{ item.user__username }}</td>
                <td>{{ item.user__first_name }}</td>  <!-- user__first_name kullanımı -->
                <td>{{ item.user__last_name }}</td>
                <td>{{ item.total_edinitsa }}</td>
                <td>{{ item.total_price }}</td>
                <td>{{ item.created }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">Результат не найден.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
  </div>

{% endblock %}
