{% extends 'reports/base.html' %}

{% block content %}

    <h4>Отчет по сотрудникам</h4>
    <form method="post" class="mb-4">
    {% csrf_token %}
    <div class="container">
        <div class="row">
    <div class="col-md-3">
        <div class="form-group">
            <label for="{{ form.user.id_for_label }}">{{ form.user.label }}</label>
            {{ form.user }} <!-- Bootstrap stilinde açılır menü -->
        </div>
    </div>
    <div class="col-md-3">
        <div class="form-group">
            <label for="{{ form.status.id_for_label }}">{{ form.status.label }}</label>
            {{ form.status }} <!-- Bootstrap stilinde açılır menü -->
        </div>
    </div>
    <div class="col-md-2">
        <div class="form-group">
            <label for="{{ form.start_date.id_for_label }}">{{ form.start_date.label }}</label>
            {{ form.start_date }} <!-- Bootstrap stilinde tarih seçici -->
        </div>
    </div>
    <div class="col-md-2">
        <div class="form-group">
            <label for="{{ form.end_date.id_for_label }}">{{ form.end_date.label }}</label>
            {{ form.end_date }} <!-- Bootstrap stilinde tarih seçici -->
        </div>
    </div>
    <div class="col-md-2 d-flex align-items-end">
        <button type="submit" class="btn btn-secondary btn-sm w-100">Показать отчет</button>
    </div>
</div>

    </div>
</form>

 <div class="d-flex justify-content-end mb-3"> <!-- Butonları sağa hizalamak için -->
        <div class="me-2">
            {% include 'partials/print.html' %}
        </div>
        <div>
            {% include 'partials/to_exel.html' %}
        </div>
    </div>



    {% if report_data %}
    <div class="mt-2" id="table-container">
        <table class="table table-bordered"  id="mytable" >
            <thead>
             <tr>
                <!-- Kullanıcının adını tablo başlığı olarak göster -->
                <th colspan="6" class="text-center">
                    {% if user %}
                    Сотрудник: {{ user.username }} - состояния работ: {{ status }} - общая количество единицы: {{ total_units }}
                    {% endif %}
                </th>
            </tr>
                <tr>
                    <th>Крой №</th>
                    <th>Операция</th>
                    <th>Единица</th>
                    <th>Цена</th>
                    <th>время операции</th>
                </tr>
            </thead>
            <tbody>
                {% for item in report_data %}
                    <tr>
                        <td>{{ item.kroy_no }}</td>
                        <td>{{ item.operations}} </td>
                        <td>{{ item.edinitsa }}</td>
                        <td>{{ item.price }}</td>
                        <td>{{ item.created }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>По выбранным вами критериям данные не найдены.</p>
    {% endif %}
    </div>

{% endblock %}
